<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFS ì„œë²„ ì‘ë™ ê³¼ì •</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 40px;
            font-size: 2em;
        }

        .stage {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 60px 0;
            min-height: 300px;
            position: relative;
        }

        .component {
            position: relative;
            text-align: center;
        }

        .box {
            width: 180px;
            height: 180px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .box:hover {
            transform: translateY(-5px);
        }

        .client {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .server {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .storage {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .label {
            font-size: 1.1em;
            font-weight: bold;
        }

        .arrow {
            position: absolute;
            height: 3px;
            background: #ffd700;
            transform-origin: left center;
            opacity: 0;
            box-shadow: 0 0 10px #ffd700;
        }

        .arrow::after {
            content: '';
            position: absolute;
            right: -10px;
            top: -6px;
            width: 0;
            height: 0;
            border-left: 15px solid #ffd700;
            border-top: 7px solid transparent;
            border-bottom: 7px solid transparent;
        }

        .message {
            position: absolute;
            background: #ffd700;
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            opacity: 0;
            white-space: nowrap;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .description {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .description p {
            font-size: 1.1em;
            color: #555;
            line-height: 1.6;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .restart-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        @keyframes slideIn {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: var(--arrow-width);
                opacity: 1;
            }
        }

        @keyframes messageMove {
            0% {
                opacity: 0;
                transform: translateX(-20px);
            }
            10% {
                opacity: 1;
                transform: translateX(0);
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .active {
            animation: pulse 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¥ï¸ NFS ì„œë²„ ì‘ë™ ê³¼ì •</h1>
        
        <div class="description">
            <p id="stepDesc">ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ NFS(Network File System)ì˜ ì‘ë™ ê³¼ì •ì„ í™•ì¸í•˜ì„¸ìš”</p>
        </div>

        <div class="stage" id="stage">
            <div class="component">
                <div class="box client" id="client">
                    <div class="icon">ğŸ’»</div>
                    <div class="label">í´ë¼ì´ì–¸íŠ¸</div>
                </div>
            </div>

            <div class="component">
                <div class="box server" id="server">
                    <div class="icon">ğŸ–¥ï¸</div>
                    <div class="label">NFS ì„œë²„</div>
                </div>
            </div>

            <div class="component">
                <div class="box storage" id="storage">
                    <div class="icon">ğŸ’¾</div>
                    <div class="label">ìŠ¤í† ë¦¬ì§€</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="start-btn" id="startBtn">ì‹œì‘</button>
            <button class="restart-btn" id="restartBtn" disabled>ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script>
        const steps = [
            {
                desc: "1ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ê°€ NFS ì„œë²„ì— ë§ˆìš´íŠ¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤",
                from: "client",
                to: "server",
                message: "MOUNT ìš”ì²­",
                duration: 2000
            },
            {
                desc: "2ë‹¨ê³„: NFS ì„œë²„ê°€ ë§ˆìš´íŠ¸ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê³  íŒŒì¼ í•¸ë“¤ì„ ë°˜í™˜í•©ë‹ˆë‹¤",
                from: "server",
                to: "client",
                message: "íŒŒì¼ í•¸ë“¤",
                duration: 2000
            },
            {
                desc: "3ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ê°€ íŒŒì¼ ì½ê¸°/ì“°ê¸° ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤",
                from: "client",
                to: "server",
                message: "READ/WRITE",
                duration: 2000
            },
            {
                desc: "4ë‹¨ê³„: NFS ì„œë²„ê°€ ì‹¤ì œ ìŠ¤í† ë¦¬ì§€ì— ì ‘ê·¼í•©ë‹ˆë‹¤",
                from: "server",
                to: "storage",
                message: "I/O ì‘ì—…",
                duration: 2000
            },
            {
                desc: "5ë‹¨ê³„: ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ NFS ì„œë²„ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤",
                from: "storage",
                to: "server",
                message: "ë°ì´í„°",
                duration: 2000
            },
            {
                desc: "6ë‹¨ê³„: NFS ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê²°ê³¼ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤",
                from: "server",
                to: "client",
                message: "ì‘ë‹µ ë°ì´í„°",
                duration: 2000
            },
            {
                desc: "ì™„ë£Œ! NFSë¥¼ í†µí•œ íŒŒì¼ ê³µìœ ê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒìŠµë‹ˆë‹¤ âœ…",
                from: null,
                to: null,
                message: "",
                duration: 2000
            }
        ];

        let currentStep = 0;
        let isAnimating = false;

        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const stepDesc = document.getElementById('stepDesc');
        const stage = document.getElementById('stage');

        function getPosition(elementId) {
            const el = document.getElementById(elementId);
            const rect = el.getBoundingClientRect();
            const stageRect = stage.getBoundingClientRect();
            return {
                x: rect.left - stageRect.left + rect.width / 2,
                y: rect.top - stageRect.top + rect.height / 2
            };
        }

        function createArrow(from, to) {
            const fromPos = getPosition(from);
            const toPos = getPosition(to);
            
            const dx = toPos.x - fromPos.x;
            const dy = toPos.y - fromPos.y;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;

            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            arrow.style.left = fromPos.x + 'px';
            arrow.style.top = fromPos.y + 'px';
            arrow.style.transform = `rotate(${angle}deg)`;
            arrow.style.setProperty('--arrow-width', (length - 20) + 'px');
            arrow.style.animation = 'slideIn 0.8s ease-out forwards';

            stage.appendChild(arrow);
            return arrow;
        }

        function createMessage(from, to, text) {
            const fromPos = getPosition(from);
            const toPos = getPosition(to);
            
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = text;
            message.style.left = (fromPos.x + toPos.x) / 2 + 'px';
            message.style.top = (fromPos.y + toPos.y) / 2 - 30 + 'px';
            message.style.animation = 'messageMove 2s ease-in-out forwards';

            stage.appendChild(message);
            return message;
        }

        function animateStep(step) {
            stepDesc.textContent = step.desc;

            if (step.from && step.to) {
                const fromEl = document.getElementById(step.from);
                const toEl = document.getElementById(step.to);
                
                fromEl.classList.add('active');
                setTimeout(() => toEl.classList.add('active'), 400);

                const arrow = createArrow(step.from, step.to);
                const message = createMessage(step.from, step.to, step.message);

                setTimeout(() => {
                    arrow.remove();
                    message.remove();
                    fromEl.classList.remove('active');
                    toEl.classList.remove('active');
                }, step.duration);
            }
        }

        async function runAnimation() {
            isAnimating = true;
            startBtn.disabled = true;
            restartBtn.disabled = true;

            for (let i = 0; i < steps.length; i++) {
                currentStep = i;
                animateStep(steps[i]);
                await new Promise(resolve => setTimeout(resolve, steps[i].duration));
            }

            isAnimating = false;
            restartBtn.disabled = false;
        }

        startBtn.addEventListener('click', () => {
            runAnimation();
        });

        restartBtn.addEventListener('click', () => {
            currentStep = 0;
            stepDesc.textContent = "ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ NFS(Network File System)ì˜ ì‘ë™ ê³¼ì •ì„ í™•ì¸í•˜ì„¸ìš”";
            startBtn.disabled = false;
            restartBtn.disabled = true;
            
            const arrows = stage.querySelectorAll('.arrow');
            const messages = stage.querySelectorAll('.message');
            arrows.forEach(el => el.remove());
            messages.forEach(el => el.remove());
        });
    </script>
</body>
</html>
